<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->
<htmlform>
	<script type="text/javascript">
		jq(document).ready(function () {
			
			if (getValue('artReceived.value') == 1065) {
				jq('#artReceivedName :input').prop('disabled', false);
				jq('#artReceivedPlace :input').prop('disabled', false);
				jq('#otherArtReceivedPlace :input').prop('disabled', false);
				jq('#sDate1 :input').prop('disabled', false);
				jq('#eDate1 :input').prop('disabled', false);
				jq('#duration1 :input').prop('disabled', false);
				jq('#table1 :input').prop('disabled', false);
			}
			else {
				jq('#artReceivedName :input').prop('disabled', true);
				jq('#artReceivedPlace :input').prop('disabled', true);
				jq('#otherArtReceivedPlace :input').prop('disabled', true);
				jq('#sDate1 :input').prop('disabled', true);
				jq('#eDate1 :input').prop('disabled', true);
				jq('#duration1 :input').prop('disabled', true);
				jq('#table1 :input').prop('disabled', true);
				
			}
		
			jq("#artReceived input:radio").change(function() {
				if (getValue('artReceived.value') == 1065) {
					jq('#artReceivedName :input').prop('disabled', false);
					jq('#artReceivedPlace :input').prop('disabled', false);
					jq('#otherArtReceivedPlace :input').prop('disabled', false);
					jq('#sDate1 :input').prop('disabled', false);
					jq('#eDate1 :input').prop('disabled', false);
					jq('#duration1 :input').prop('disabled', false);
					jq('#table1 :input').prop('disabled', false);
				}
				else {
					jq('#artReceivedName :input').prop('disabled', true);
					jq('#artReceivedPlace :input').prop('disabled', true);
					jq('#otherArtReceivedPlace :input').prop('disabled', true);
					jq('#sDate1 :input').prop('disabled', true);
					jq('#eDate1 :input').prop('disabled', true);
					jq('#duration1 :input').prop('disabled', true);
					jq('#table1 :input').prop('disabled', true);
				}
			});
			
			if(getValue('artReceivedPlace.value')!=5622){
				jq('#otherArtReceivedPlace :input').prop('disabled', true);						
			}
			else{
				jq('#otherArtReceivedPlace :input').prop('disabled', false);
			}
			
			jq("#artReceivedPlace").change(function() {
				if(getValue('artReceivedPlace.value')!=5622){
					jq('#otherArtReceivedPlace :input').prop('disabled', true);						
				}
				else{
					jq('#otherArtReceivedPlace :input').prop('disabled', false);
				}
			});
			
			
			
			if (getValue('drug.value') == 1066) {
				jq('#drugName :input').prop('disabled', true);
				jq('#otherDrugName :input').prop('disabled', true);
			}
			else {
				jq('#drugName :input').prop('disabled', false);
				
				if(getValue('drugName.value')!=5622){
					jq('#otherDrugName :input').prop('disabled', true);						
				}
				else{
					jq('#otherDrugName :input').prop('disabled', false);
				}
			}
			
			jq("#drugName").change(function() {
				if(getValue('drugName.value')!=5622){
					jq('#otherDrugName :input').prop('disabled', true);						
				}
				else{
					jq('#otherDrugName :input').prop('disabled', false);
				}
			});
		
			jq("#drug input:radio").change(function() {
				if (getValue('drug.value') == 1066) {
					jq('#drugName :input').prop('disabled', true);
					jq('#otherDrugName :input').prop('disabled', true);	
				}
				else {
					jq('#drugName :input').prop('disabled', false);

					if(getValue('drugName.value')!=5622){
						jq('#otherDrugName :input').prop('disabled', true);						
					}
					else{
						jq('#otherDrugName :input').prop('disabled', false);
					}

				}
			});
			
			var sd1 = new Date(getValue('sDate1.value'));
			var ed1 = new Date(getValue('eDate1.value'));
			var sd2 = new Date(getValue('sDate2.value'));
			var ed2 = new Date(getValue('eDate2.value'));
			var sd3 = new Date(getValue('sDate3.value'));
			var ed3 = new Date(getValue('eDate3.value'));
			var sd4 = new Date(getValue('sDate4.value'));
			var ed4 = new Date(getValue('eDate4.value'));

			var diff1 = Math.floor(ed1.getTime() - sd1.getTime());
		    var day1 = 1000 * 60 * 60 * 24;
		    var days1 = Math.floor(diff1/day1);
		    var months1 = Math.floor(days1/31);
		    if(sd1!="Invalid Date" &amp;&amp; ed1!="Invalid Date"){
		    	
				document.getElementById("w17").value = months1;
				document.getElementById("w18").value = months1;
			}
			else{
				document.getElementById("w17").value = 0;
				document.getElementById("w18").value = 0;
			}
		    
			jq("#sDate1 :input, #eDate1 :input").change(function() {
				var sd1 = new Date(getValue('sDate1.value'));
				var ed1 = new Date(getValue('eDate1.value'));

				var diff1 = Math.floor(ed1.getTime() - sd1.getTime());
			    var day1 = 1000 * 60 * 60 * 24;
			    var days1 = Math.floor(diff1/day1);
			    var months1 = Math.floor(days1/31);
			    if(sd1!="Invalid Date" &amp;&amp; ed1!="Invalid Date"){
			    	
					document.getElementById("w17").value = months1;
					document.getElementById("w18").value = months1;
				}
				else{
					document.getElementById("w17").value = 0;
					document.getElementById("w18").value = 0;
				}
				
			});
		    
		    var diff2 = Math.floor(ed2.getTime() - sd2.getTime());
		    var day2 = 1000 * 60 * 60 * 24;
		    var days2 = Math.floor(diff2/day2);
		    var months2 = Math.floor(days2/31);
		    if(sd2!="Invalid Date" &amp;&amp; ed2!="Invalid Date"){
		    	
				document.getElementById("w27").value = months2;
				document.getElementById("w28").value = months2;
			}
			else{
				document.getElementById("w27").value = 0;
				document.getElementById("w28").value = 0;
			}
		    
			jq("#sDate2 :input, #eDate2 :input").change(function() {
				var sd2 = new Date(getValue('sDate2.value'));
				var ed2 = new Date(getValue('eDate2.value'));

				var diff2 = Math.floor(ed2.getTime() - sd2.getTime());
			    var day2 = 1000 * 60 * 60 * 24;
			    var days2 = Math.floor(diff2/day2);
			    var months2 = Math.floor(days2/31);
			    if(sd2!="Invalid Date" &amp;&amp; ed2!="Invalid Date"){
			    	
					document.getElementById("w27").value = months2;
					document.getElementById("w28").value = months2;
				}
				else{
					document.getElementById("w27").value = 0;
					document.getElementById("w28").value = 0;
				}
			
			});
		    
		    var diff3 = Math.floor(ed3.getTime() - sd3.getTime());
		    var day3 = 1000 * 60 * 60 * 24;
		    var days3 = Math.floor(diff3/day3);
		    var months3 = Math.floor(days3/31);
		    if(sd3!="Invalid Date" &amp;&amp; ed3!="Invalid Date"){
		    	
				document.getElementById("w37").value = months3;
				document.getElementById("w38").value = months3;
			}
			else{
				document.getElementById("w37").value = 0;
				document.getElementById("w38").value = 0;
			}
		    
			jq("#sDate3 :input, #eDate3 :input").change(function() {
				var sd3 = new Date(getValue('sDate3.value'));
				var ed3 = new Date(getValue('eDate3.value'));
			    var diff3 = Math.floor(ed3.getTime() - sd3.getTime());
			    var day3 = 1000 * 60 * 60 * 24;
			    var days3 = Math.floor(diff3/day3);
			    var months3 = Math.floor(days3/31);
			    if(sd3!="Invalid Date" &amp;&amp; ed3!="Invalid Date"){
			    	
					document.getElementById("w37").value = months3;
					document.getElementById("w38").value = months3;
				}
				else{
					document.getElementById("w37").value = 0;
					document.getElementById("w38").value = 0;
				}
				
			});
			
		    var diff4 = Math.floor(ed4.getTime() - sd4.getTime());
		    var day4 = 1000 * 60 * 60 * 24;
		    var days4 = Math.floor(diff4/day4);
		    var months4 = Math.floor(days4/31);
		    if(sd4!="Invalid Date" &amp;&amp; ed4!="Invalid Date"){
		    	
				document.getElementById("w47").value = months4;
				document.getElementById("w48").value = months4;
			}
			else{
				document.getElementById("w47").value = 0;
				document.getElementById("w48").value = 0;
			}
		    
			jq("#sDate4 :input, #eDate4 :input").change(function() {
				var sd4 = new Date(getValue('sDate4.value'));
				var ed4 = new Date(getValue('eDate4.value'));
			    var diff4 = Math.floor(ed4.getTime() - sd4.getTime());
			    var day4 = 1000 * 60 * 60 * 24;
			    var days4 = Math.floor(diff4/day4);
			    var months4 = Math.floor(days4/31);
			    if(sd4!="Invalid Date" &amp;&amp; ed4!="Invalid Date"){
			    	
					document.getElementById("w47").value = months4;
					document.getElementById("w48").value = months4;
				}
				else{
					document.getElementById("w47").value = 0;
					document.getElementById("w48").value = 0;
				}				
			});
			
		});
	</script>
	
	<!-- STYLE ======================
	=================================-->
	
	<style>
	td, tr, table{
	padding: 5px 10px 5px 5px;
	}
	
	table{
	margin-left: 15px;
	}
	
	tbody{
	padding-left: 0px !important;
	}
	
	input[type=text]{
	width: 200px;
	}
	
	select{
	width: 200px;
	height: 28px !important;
	}
	
	input[type=button], button{
	padding: 5px 10px 5px 5px;
	margin-right: 15px;
	min-width: 110px;
	font-weight:bold;
	background-color:#d9d9d9 !important;
	}
	
	input[type=radio]{
	padding: 0 0 0 0;
	min-width: 20px;
	font-weight:bold;
	background-color:#d9d9d9 !important;
	}
	</style>
	
	<!-- STYLE ======================
	=================================-->
	
	<!-- Encounter date, provider and location are not relevant for CE forms -->
	<div style="display:none">
		<encounterDate id="encounter-date" showTime="true" />
		<encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" />
	</div>

	<div class="ke-form-content">
	<table style="background-color: #e8efdc" align="center"  class="tb1" cellspacing="12" width="60%">
		<tr>
			<td>Was ART received before ? </td>
			<td><obs  style="radio" conceptId="9b8f4989-833a-4aff-bb93-8b87a8b2c0a0" id="artReceived"/></td>
		</tr>
		<tr>
			<td>If yes, please specify</td>
			<td><obs conceptId="9c793547-81ed-4acd-a308-c13ee5dc467f" id="artReceivedName"/></td>
		</tr>
	<!--<tr>
			<td>Place</td>
			<td><obs conceptId="cbcad523-81a0-4fd4-a7d9-567346d42875" id="artReceivedPlace"/></td>
	 	<td>if other: <obs conceptId="116138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="otherArtReceivedPlace"/></td> 
		</tr>		
		<tr>
			<td>Start Date</td>
			<td><obs conceptId="1190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="sDate1"/></td>
		</tr>		
		<tr>
			<td>End Date</td>
			<td><obs conceptId="51e7342a-c0aa-4dea-9e1a-71a3dd1519fa" id="eDate1"/></td>
		</tr>		
		<tr>
			<td>Duration</td>
			<td><obs id="duration1" conceptId="24646d76-c162-4bcd-b611-4a34e3f98123" />months</td>
		</tr>		-->
		<tr>
			<td colspan="3"><br/><br/>
				<table id="table1" cellspacing="1" cellpadding="1" width="300" style="margin-left: 0px; !important;" >
					<thead>
						<tr>
							<th width="15%" border="1px ,solid">Sr. No</th>
							<th>Drug Regimen</th>
							<th>Place</th>
							<th>Start Date</th>
							<th>End Date</th>
							<th>Duration (months)</th>
						</tr>
					</thead>
					<tbody>
						<obsgroup groupingConceptId="5706AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
							<tr>
								<td style="width:260px;">1</td>
								<td style="width:260px;"><obs conceptId="8759ede7-b637-4e8d-84f4-ab04d7f96bbe" style="autocomplete" answerClasses="Drug"/></td>
								<td><obs conceptId="cbcad523-81a0-4fd4-a7d9-567346d42875" id="artReceivedPlace1"/></td>
								<td><obs conceptId="1190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="sDate1"/></td>
								<td><obs conceptId="51e7342a-c0aa-4dea-9e1a-71a3dd1519fa" id="eDate1"/></td>
								<td><obs id="duration1" conceptId="24646d76-c162-4bcd-b611-4a34e3f98123" /></td>
							</tr>
						</obsgroup>
						<obsgroup groupingConceptId="5706AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
							<tr>
								<td>2</td>
								<td><obs conceptId="8759ede7-b637-4e8d-84f4-ab04d7f96bbe" style="autocomplete" answerClasses="Drug"/></td>
								<td><obs conceptId="cbcad523-81a0-4fd4-a7d9-567346d42875" id="artReceivedPlace2"/></td>
								<td><obs conceptId="1190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="sDate2"/></td>
								<td><obs conceptId="51e7342a-c0aa-4dea-9e1a-71a3dd1519fa" id="eDate2"/></td>
								<td><obs id="duration2" conceptId="24646d76-c162-4bcd-b611-4a34e3f98123" /></td>
							</tr>
						</obsgroup>
						<obsgroup groupingConceptId="5706AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
							<tr>
								<td>3</td>
								<td><obs conceptId="8759ede7-b637-4e8d-84f4-ab04d7f96bbe" style="autocomplete" answerClasses="Drug"/></td>
								<td><obs conceptId="cbcad523-81a0-4fd4-a7d9-567346d42875" id="artReceivedPlace3"/></td>
								<td><obs conceptId="1190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="sDate3"/></td>
								<td><obs conceptId="51e7342a-c0aa-4dea-9e1a-71a3dd1519fa" id="eDate3"/></td>
								<td><obs id="duration3" conceptId="24646d76-c162-4bcd-b611-4a34e3f98123" /></td>
							</tr>
						</obsgroup>
						<obsgroup groupingConceptId="5706AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
							<tr>
								<td>4</td>
								<td><obs conceptId="8759ede7-b637-4e8d-84f4-ab04d7f96bbe" style="autocomplete" answerClasses="Drug"/></td>
								<td><obs conceptId="cbcad523-81a0-4fd4-a7d9-567346d42875" id="artReceivedPlace4"/></td>
								<td><obs conceptId="1190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="sDate4"/></td>
								<td><obs conceptId="51e7342a-c0aa-4dea-9e1a-71a3dd1519fa" id="eDate4"/></td>
								<td><obs id="duration4" conceptId="24646d76-c162-4bcd-b611-4a34e3f98123" /></td>
							</tr>
						</obsgroup>
				</tbody>
				</table>
			</td>
		</tr>
		<tr>
			<td><br/>Was anti - TB treatment received previously?* </td>
			<td><br/><obs style="radio" conceptId="8923901b-1d42-44c4-abdf-8532fa8645d1" /></td>
		</tr>
		<tr>
			<td>Drug allergies? </td>
			<td><obs style="radio" conceptId="160643AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="drug"/></td>
		</tr>
		<tr>
			<td>If yes, name of drug </td>
			<td><obs conceptId="160558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="drugName" /></td>
			<td>
				If other: <obs conceptId="4d988cca-a935-4e41-9722-1cb280dd4a63" id="otherDrugName" />
				
			</td>
		</tr>
	</table>

	</div>
	
	<div class="ke-form-footer">
		<submit successUrl=""/>
	</div>

</htmlform>